{# C:\app\kbm_app\kbm_core\templates\kbm_core\detail_kelas.html #}
{% extends 'kbm_core/base.html' %}

{% block title %}{{ judul_halaman }}{% endblock %}

{% block content %}
    <h2 class="mb-4">{{ judul_halaman }}</h2>

    <div class="card mb-4"> {# Gunakan card untuk membungkus detail kelas #}
        <div class="card-header">
            Informasi Kelas
        </div>
        <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Kode Kelas:</strong> <span>{{ kelas.idkelas }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Nama Kelas:</strong> <span>{{ kelas.namakelas }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Tingkat/Jenjang:</strong> <span>{{ kelas.tingkat }}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Jurusan/Program:</strong> <span>{% if kelas.jurusan %}{{ kelas.jurusan }}{% else %}-{% endif %}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Wali Kelas:</strong> <span>{% if kelas.guru_idguru %}{{ kelas.guru_idguru.nama_lengkap }}{% else %}-{% endif %}</span>
            </li>
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <strong>Tahun Pelajaran:</strong> <span>{% if kelas.tahunajaran_idtahunajaran %}{{ kelas.tahunajaran_idtahunajaran }}{% else %}-{% endif %}</span>
            </li>
        </ul>
    </div>

    <h3 class="mb-3">Daftar Peserta Didik</h3>

    {% if peserta_didik_list %}
        <div class="table-responsive"> {# Untuk membuat tabel responsif di layar kecil #}
            <table class="table table-striped table-hover"> {# Gaya tabel Bootstrap #}
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Nama Lengkap</th>
                        <th>NIS</th>
                        <th>NISN</th>
                        <th>Jenis Kelamin</th>
                        </tr>
                </thead>
                <tbody>
                    {% for pd in peserta_didik_list %}
                        <tr>
                            <td>{{ forloop.counter }}</td> {# Nomor urut otomatis #}
                            <td>{{ pd.namalengkappd }}</td>
                            <td>{{ pd.nis }}</td>
                            <td>{{ pd.nisn }}</td>
                            <td>{{ pd.gender }}</td>
                            </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <div class="alert alert-info" role="alert">
            Belum ada peserta didik yang terdaftar di kelas ini untuk tahun ajaran aktif.
        </div>
    {% endif %}

    <p class="mt-4">
        <a href="{% url 'edit_kelas' id_kelas=kelas.idkelas %}" class="btn btn-primary me-2">Edit Kelas</a>
        <a href="{% url 'daftar_kelas' %}" class="btn btn-secondary">Kembali ke Daftar Kelas</a>
    </p>
{% endblock %}